const App=function(){let e={currentView:void 0,showSidebar:!1};proxymity(document.body,e);proxymity.watch(e,"currentView",(function(e,a){e&&(e.app.attached=!0),a&&(a.app.attached=!1)})),window.addEventListener("popstate",(function(e){let a=e.state;a.focus&&App[a.focus].focus()})),"serviceWorker"in navigator&&(e.swReady=navigator.serviceWorker.register("./service-worker.js",{scope:document.location.pathname}).then((function(e){console.log("Registration successful, scope is:",e.scope)})).catch((function(e){console.log("Service worker registration failed, error:",e)}))),e.getSavedCards=function(e){App.storage.getSavedChampion1().then(a=>e.savedChampions1=a),App.storage.getSavedChampion2().then(a=>e.savedChampions2=a),App.storage.getSavedChampion3().then(a=>e.savedChampions3=a),App.storage.getSavedFollower().then(a=>e.savedFollowers=a),App.storage.getSavedLandmark().then(a=>e.savedLandmarks=a),App.storage.getSavedSpell().then(a=>e.savedSpells=a),App.storage.getSavedKeyworkd().then(a=>e.savedKeywords=a)},e.exportSavedData=function(){e.loading.start(),Promise.all([App.storage.getSavedChampion1(),App.storage.getSavedChampion2(),App.storage.getSavedChampion3(),App.storage.getSavedFollower(),App.storage.getSavedLandmark(),App.storage.getSavedSpell(),App.storage.getSavedKeyworkd()]).then(t=>{let o={};o.savedChampions1=t[0],o.savedChampions2=t[1],o.savedChampions3=t[2],o.savedFollowers=t[3],o.savedLandmarks=t[4],o.savedSpells=t[5],o.savedKeywords=t[6];let n=JSON.stringify(o);a(n,"card-data.json","application/json"),e.loading.stop()}),e.showSidebar=!1};let a=e.downloadFile=function(e,a,t){var o=document.createElement("a"),n=new Blob([e],{type:t});o.href=URL.createObjectURL(n),o.download=a,o.click()};return e.importCardDataJson=function(a){let t=new FileReader,o=a.files[0];t.addEventListener("load",(function(){try{e.loading.start();let a=JSON.parse(t.result),o=Promise.resolve(),n=[a.savedChampions1.reduce((e,a)=>e.then(e=>App.storage.saveChampion1(a.cardData,a.id)),o),a.savedChampions2.reduce((e,a)=>e.then(e=>App.storage.saveChampion2(a.cardData,a.id)),o),a.savedChampions3.reduce((e,a)=>e.then(e=>App.storage.saveChampion3(a.cardData,a.id)),o),a.savedFollowers.reduce((e,a)=>e.then(e=>App.storage.saveFollower(a.cardData,a.id)),o),a.savedLandmarks.reduce((e,a)=>e.then(e=>App.storage.saveLandmark(a.cardData,a.id)),o),a.savedSpells.reduce((e,a)=>e.then(e=>App.storage.saveSpell(a.cardData,a.id)),o),a.savedKeywords.reduce((e,a)=>e.then(e=>App.storage.saveKeyword(a.cardData,a.id)),o)];Promise.all(n).then(()=>{e.loading.stop(),document.location.reload()}).catch(a=>{console.warn(a),e.loading.stop(),alert("corrupted file. please try a different file")})}catch(a){console.warn(a),e.loading.stop(),alert("corrupted file. please try a different file")}})),o&&(t.readAsText(o),e.showSidebar=!1)},e.loading={startingView:void 0,start:function(){e.currentView!==e.loading.view&&(e.loading.startingView=e.currentView,e.currentView=e.loading.view)},stop:function(){e.loading.startingView&&(e.currentView=e.loading.startingView,e.loading.startingView=void 0)},view:proxymity(' <main id="main-loading" class="flex vhcenter"> <div class="icon"> <div class="loading"></div> </div> </main> ',e)},e}();