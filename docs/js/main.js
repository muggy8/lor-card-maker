const App=function(){let e={currentView:void 0,showSidebar:!1};proxymity(document.body,e);proxymity.watch(e,"currentView",(function(e,a){e&&(e.app.attached=!0),a&&(a.app.attached=!1)})),window.addEventListener("popstate",(function(e){let a=e.state;a.focus&&App[a.focus].focus()})),"serviceWorker"in navigator&&(e.swReady=navigator.serviceWorker.register("./service-worker.js",{scope:document.location.pathname}).then((function(e){console.log("Registration successful, scope is:",e.scope)})).catch((function(e){console.log("Service worker registration failed, error:",e)}))),e.getSavedCards=function(e){App.storage.getSavedChampion1().then(a=>e.savedChampions1=a),App.storage.getSavedChampion2().then(a=>e.savedChampions2=a),App.storage.getSavedChampion3().then(a=>e.savedChampions3=a),App.storage.getSavedFollower().then(a=>e.savedFollowers=a),App.storage.getSavedLandmark().then(a=>e.savedLandmarks=a),App.storage.getSavedSpell().then(a=>e.savedSpells=a),App.storage.getSavedKeyworkd().then(a=>e.savedKeywords=a)},e.exportSavedData=function(){Promise.all([App.storage.getSavedChampion1(),App.storage.getSavedChampion2(),App.storage.getSavedChampion3(),App.storage.getSavedFollower(),App.storage.getSavedLandmark(),App.storage.getSavedSpell(),App.storage.getSavedKeyworkd()]).then(e=>{let t={};t.savedChampions1=e[0],t.savedChampions2=e[1],t.savedChampions3=e[2],t.savedFollowers=e[3],t.savedLandmarks=e[4],t.savedSpells=e[5],t.savedKeywords=e[6];let o=JSON.stringify(t);a(o,"card-data.json","application/json")}),e.showSidebar=!1};let a=e.downloadFile=function(e,a,t){var o=document.createElement("a"),s=new Blob([e],{type:t});o.href=URL.createObjectURL(s),o.download=a,o.click()};return e.importCardDataJson=function(a){let t=new FileReader,o=a.files[0];t.addEventListener("load",(function(){try{let e=JSON.parse(t.result),a=[e.savedChampions1.map(e=>App.storage.saveChampion1(e.cardData,e.id)),e.savedChampions2.map(e=>App.storage.saveChampion2(e.cardData,e.id)),e.savedChampions3.map(e=>App.storage.saveChampion3(e.cardData,e.id)),e.savedFollowers.map(e=>App.storage.saveFollower(e.cardData,e.id)),e.savedLandmarks.map(e=>App.storage.saveLandmark(e.cardData,e.id)),e.savedSpells.map(e=>App.storage.saveSpell(e.cardData,e.id)),e.savedKeywords.map(e=>App.storage.saveKeyword(e.cardData,e.id))].flat();Promise.all(a).then(()=>{document.location.reload()}).catch(()=>{alert("corrupted file. please try a different file")})}catch(e){alert("corrupted file. please try a different file")}})),o&&(t.readAsText(o),e.showSidebar=!1)},e}();