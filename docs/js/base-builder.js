!function(){let e=App.baseBuilderController={};e.decorateText=function(e){let t=e;return Object.keys(cardOptionsData.icons).forEach(e=>{let n=`<${e}/>`;t=t.split(n).join(`<div xmlns="http://www.w3.org/1999/xhtml" style="height: 1.2em; width: 1.2em; display:inline-block; background-repeat: no-repeat; background-size: contain; background-image: url('${iconCache[e]}');vertical-align: middle;"></div>`)}),t=this.card.blueWords.reduce((e,t)=>t?e.split(t).join(`<span style="color: #49a0f8" xmlns="http://www.w3.org/1999/xhtml">${t}</span>`):e,t),t=this.card.orangeWords.reduce((e,t)=>t?e.split(t).join(`<span style="color: #fad65a" xmlns="http://www.w3.org/1999/xhtml">${t}</span>`):e,t),t=t.split("\n").map(e=>`<div>${e}</div>`).join(""),t},e.wrapText=function(e,t,n={}){let a=d3plus.textwrap().container(d3.select(e)).resize(!!t);n.align?a.align(n.align):a.align("middle"),n.valign&&a.valign(n.valign),n.shape&&a.shape(n.shape),n.size&&a.size(n.size),a.draw()},e.effectResize=async function(e,t="effectFontSize"){let n=this,a=e.offsetHeight;for(;e.scrollHeight>a&&n.card[t]>24;)n.card[t]--,await proxymity.on.renderend},e.exportCard=async function(){let e=this,t=Array.from(e.cardInstance.querySelectorAll("image")).map(e=>getBase64FromImageUrl(e.href.baseVal).then(t=>{e.removeAttribute("href"),e.removeAttribute(":xlinkhref"),e.setAttribute("xlink:href",t)}));e.exporting=!0,t.push(proxymity.on.renderend),await Promise.all(t),e.cardInstance.querySelectorAll("foreignObject *").forEach(e=>e.removeAttribute("xmlns"));let n=await svgAsPngUri(e.cardInstance,{width:680,height:1024,scale:1/(window.devicePixelRatio||1)});e.exporting=!1,function(e){const t=/data:([^;]+);base64,/.exec(e)[1],n=atob(e.substr(`data:${t};base64,`.length)),a=[];for(let e=0;e<n.length;e+=1024){const t=n.slice(e,e+1024),r=new Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);const i=new Uint8Array(r);a.push(i)}const r=new Blob(a,{type:t}),i=URL.createObjectURL(r);window.open(i,"_blank")}(n)};e.saveCard=async function(){let e=this;e.cardId=await App.storage.saveChampion1(e.card,e.cardId)},e.deleteCard=async function(){await App.storage.delSavedChampion1(this.cardId),window.location.reload()},e.focusFactory=function(e,t,n){let a=this;return function(){return iconCache.promise.then(()=>{a.cardOptionsController.app.mbShowConfigs=!1,App.currentView!==e&&(App.currentView=e,a.clearCard(),window.scroll(0,0),history.pushState({focus:t},n))})}}}();