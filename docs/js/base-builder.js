!function(){let e=App.baseBuilderController={};e.decorateText=function(e){let t=e;return Object.keys(cardOptionsData.icons).forEach(e=>{let a=`<${e}/>`;t=t.split(a).join(`<div xmlns="http://www.w3.org/1999/xhtml" style="height: 1.2em; width: 1.2em; display:inline-block; background-repeat: no-repeat; background-size: contain; background-image: url('${iconCache[e]}');vertical-align: middle;"></div>`)}),t=this.card.blueWords.reduce((e,t)=>t?e.split(t).join(`<span style="color: #49a0f8" xmlns="http://www.w3.org/1999/xhtml">${t}</span>`):e,t),t=this.card.orangeWords.reduce((e,t)=>t?e.split(t).join(`<span style="color: #fad65a" xmlns="http://www.w3.org/1999/xhtml">${t}</span>`):e,t),t=t.split("\n").map(e=>`<div>${e}</div>`).join(""),t},e.wrapText=function(e,t,a={}){let r=d3plus.textwrap().container(d3.select(e)).resize(!!t);a.align?r.align(a.align):r.align("middle"),a.valign&&r.valign(a.valign),a.shape&&r.shape(a.shape),a.size&&r.size(a.size),r.draw()},e.effectResize=async function(e,t){let a=e.offsetHeight;for(;e.scrollHeight>a&&card[t]>24;)card[t]--,await proxymity.on.renderend},e.exportCard=async function(){let e=this,t=Array.from(e.cardInstance.querySelectorAll("image")).map(e=>getBase64FromImageUrl(e.href.baseVal).then(t=>e.setAttribute("xlink:href",t)));e.exporting=!0,t.push(proxymity.on.renderend),await Promise.all(t),e.cardInstance.querySelectorAll("foreignObject *").forEach(e=>e.removeAttribute("xmlns")),await saveSvgAsPng(e.cardInstance,(card.name||"lor-card")+".png",{width:680,height:1024,scale:1/(window.devicePixelRatio||1)}),e.exporting=!1},e.saveCard=async function(){let e=this;e.cardId=await App.storage.saveChampion1(e.card,e.cardId)},e.deleteCard=async function(){await App.storage.delSavedChampion1(this.cardId),window.location.reload()},e.focusFactory=function(e,t,a){let r=this;return function(){return iconCache.promise.then(()=>{r.cardOptionsController.app.mbShowConfigs=!1,App.currentView!==e&&(App.currentView=e,r.clearCard(),window.scroll(0,0),history.pushState({focus:t},a))})}}}();