import e from"/cdn/save-svg-as-png";import{openUri as t}from"/Views/card-editor.js";export default async function(s,a,n){const o=a.width.baseVal.value,r=a.height.baseVal.value;if("json"===n.state.settings.exportFormat){const e=jsonToBlob(JSON.stringify(s,null,"\t")),a=await new Promise((t=>{var s=new FileReader;s.readAsDataURL(e),s.onloadend=function(){t(s.result)}}));return t(a,`${(s.fileName||s.name||"export").toUpperCase()}.json`)}if("svg"===n.state.settings.exportFormat){const n=await e.svgAsDataUri(a,{excludeUnusedCss:!0,width:o,height:r});return t(n,`${(s.fileName||s.name||"export").toUpperCase()}.svg`)}{const i=await e.svgAsPngUri(a,{excludeUnusedCss:!0,width:o,height:r,encoderType:`image/${n.state.settings.exportFormat}`,excludeUnusedCss:!0});return t(i,`${(s.fileName||s.name||"export").toUpperCase()}.${n.state.settings.exportFormat}`)}}export function jsonToBlob(e){const t=(new TextEncoder).encode(e);return new Blob([t],{type:"application/json;charset=utf-8"})}