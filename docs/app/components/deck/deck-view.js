import r,{div as s}from"/Utils/elements.js";import{useEffect as t,useState as o,useCallback as d,createElement as e}from"/cdn/react";import a from"/Components/deck/deck-card.js";import c from"/Utils/use-asset-cache.js";import{calculateRowsAndColsForCardsRecursivelyWithCacheUse as i}from"/Components/batch-renderer.js";import m from"/Components/card-template/svg-wrap.js";import{svgRefference as n}from"/Views/card-editor.js";import p from"/Utils/load-css.js";import l from"./deck-stats-card.js";const f=p("/Components/deck/deck-view.css");export default r((function(r){const t=c((s=>{s(i(r.cards.length?r.cardStats?[...r.cards.map((r=>r.card)),{}]:r.cards.map((r=>r.card)):[]))}),[r.cards,r.cardStats],{}),o=d((()=>{}),[]);return m({width:t.width,height:t.height,loading:r.loading},s({className:"svg-deck"},e(n.Provider,{value:{current:null,setRef:o}},r.cards.map((r=>{const s=r.card.id||r.card.cardCode||r.card.url;return a({key:s,...r,gridColumns:t.cols,gridRows:t.rows,cardSize:t.resolution})})),r.cardStats?l({cards:r.cards}):void 0)))}),f);