import{getRitoPoCItemRelic as t,patchRitoPocItemRelic as e,getLatestPoCItemRelicData as i}from"/Utils/service.js";import r from"/Utils/use-asset-cache.js";import s,{mergeDeep as l}from"/Utils/use-filter.js";import{useState as c,useCallback as o,useEffect as n,useMemo as a}from"/cdn/react";import f from"/Components/deck/hooks/get-filter-options-form-card-list.js";export default function m(){const[m,h]=c({items:[],relics:[]});n((()=>{t({},{items:[],relics:[]}).then(h)}),[]);const[u,p]=c(!1),d=o((()=>{u||(p(!0),i().then((async t=>{await e(t),h(t),p(!1)})))}),[u]),[w,L,C,F]=s({name:{filter:(t,e)=>!t||e.toLowerCase().includes(t.toLowerCase())},descriptionRaw:{filter:(t,e)=>!t||e.toLowerCase().includes(t.toLowerCase())},rarity:{filter:(t,e)=>!t||!t.length||t.includes(e)}});n((()=>{if(m.items&&m.items.length)return L(m.items);L([])}),[m.items]);const g=r((t=>{if(!m.items||!m.items.length)return;t(f(m.items))}),[m.items],{}),j=o(((t,e)=>{const i={};i[t]=e,F(i)}),[F]),[y,O,U,k]=s({name:{filter:(t,e)=>!t||e.toLowerCase().includes(t.toLowerCase())},descriptionRaw:{filter:(t,e)=>!t||e.toLowerCase().includes(t.toLowerCase())},rarity:{filter:(t,e)=>!t||!t.length||t.includes(e)}});n((()=>{if(m.relics&&m.relics.length)return O(m.relics);O([])}),[m.relics]);const R=r((t=>{if(!m.relics||!m.relics.length)return;t(f(m.relics))}),[m.relics],{}),v=o(((t,e)=>{const i={};i[t]=e,k(i)}),[k]),x=o((function(){F.call(this,...arguments),k.call(this,...arguments)}),[F,k]),b=o((function(){j.call(this,...arguments),v.call(this,...arguments)}),[j,v]),q=a((()=>l({},g,R)),[g,R]),z=a((()=>l({},C,U)),[C,U]);return{item:{list:m.items,filteredList:w,currentFilters:C,patchFilter:j,patchFilters:F,filterOptions:g},relic:{list:m.relics,filteredList:y,currentFilters:U,patchFilter:v,patchFilters:k,filterOptions:R},refreshList:d,loading:u,currentFilters:z,patchFilter:b,patchFilters:x,filterOptions:q}}