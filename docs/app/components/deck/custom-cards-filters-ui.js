import{useEffect as e,useContext as t,useRef as l}from"/cdn/react";import o,{div as r,strong as a,img as i,button as s}from"/Utils/elements.js";import{Globals as n}from"/Views/index.js";import c from"/Utils/use-toggle.js";import d from"/Utils/use-lang.js";import p from"/Components/deck/search-text.js";import u from"/Components/deck/checkbox.js";import v from"/Components/deck/range-slider.js";import{KeywordImageCheck as f}from"/Components/card-config/edit-keywords.js";import m from"/Utils/load-css.js";export default o((function(o){const m=d(),h=t(n),g=l();g.current=h;const w=l(),[F,C]=w.current=c(!1);return e((()=>{const e=h.getAllowBack();return g.current.setAllowBack(t),function(){g.current.getAllowBack()===t&&g.current.setAllowBack(e)};function t(){const[t,l]=w.current;return t?(l(!1),!1):e()}}),[]),r({className:"filter-slider gutter-b-1 "+(F?"expanded":"")},r({className:"flex no-wrap vcenter"},r({className:"grow clickable gutter-rl-.5",onClick:C},a(m("filter"))),r({className:"icon clickable animated "+(F?"minus":"menu"),onClick:C})),r({className:"options"},r({className:"gutter-rbl-.5"},r({className:"flex gutter-b"},s({onClick:()=>{o.updateSelectedFilters({name:{value:void 0},effect:{value:void 0},lvup:{value:void 0},clan:{value:void 0},keywords:{value:void 0},rarity:{value:void 0},type:{value:void 0},faction:{value:void 0},speed:{value:void 0},mana:{value:void 0},power:{value:void 0},health:{value:void 0}})},className:"gutter-trbl-.5 grow"},m("clear_filters"))),o.filterOptions.name&&o.filterOptions.name.length?p({label:m("name"),value:o.selectedFilters.name?o.selectedFilters.name.value:"",onChange:e=>o.updateSelectedFilter("name",{value:e})}):void 0,o.filterOptions.effect&&o.filterOptions.effect.length?p({label:m("card_text"),value:o.selectedFilters.effect?o.selectedFilters.effect.value:"",onChange:e=>o.updateSelectedFilter("effect",{value:e})}):void 0,o.filterOptions.lvup&&o.filterOptions.lvup.length?p({label:m("lv_up"),value:o.selectedFilters.lvup?o.selectedFilters.lvup.value:"",onChange:e=>o.updateSelectedFilter("lvup",{value:e})}):void 0,o.filterOptions.clan&&o.filterOptions.clan.length?p({label:m("clan"),value:o.selectedFilters.clan?o.selectedFilters.clan.value:"",onChange:e=>o.updateSelectedFilter("clan",{value:e})}):void 0,o.filterOptions.faction&&o.filterOptions.faction.length?u({label:m("region"),value:o.selectedFilters.faction&&o.selectedFilters.faction.value||[],onChange:e=>{o.updateSelectedFilter("faction",{value:e})},options:o.filterOptions.faction,renderOption:(e,t)=>e&&"none"!==e.toLowerCase()?r({className:(t?"":"ghost ")+"icon-checkbox flex vhcenter clickable gutter-trbl-.5"},i({src:`/Assets/region/${e.toLowerCase()}.png`})):null}):void 0,o.filterOptions.rarity&&o.filterOptions.rarity.length?u({label:m("rarity"),value:o.selectedFilters.rarity&&o.selectedFilters.rarity.value||[],onChange:e=>{o.updateSelectedFilter("rarity",{value:e})},options:o.filterOptions.rarity,renderOption:(e,t)=>e&&"none"!==e.toLowerCase()?r({className:(t?"":"ghost ")+"icon-checkbox flex vhcenter clickable gutter-trbl-.5"},i({src:`/Assets/shared/${e.toLowerCase()}.png`})):null}):void 0,o.filterOptions.mana&&o.filterOptions.mana.length?v({label:m("mana_cost"),range:o.filterOptions.mana,value:o.selectedFilters.mana&&o.selectedFilters.mana.value,onChange:e=>o.updateSelectedFilter("mana",{value:e})}):void 0,o.filterOptions.type&&o.filterOptions.type.length?u({label:m("card_type"),value:o.selectedFilters.type&&o.selectedFilters.type.value||[],onChange:e=>{o.updateSelectedFilter("type",{value:e}),e.some((e=>"champion"===e.toLowerCase()))&&e.some((e=>"follower"===e.toLowerCase()))&&e.some((e=>"spell"===e.toLowerCase()))||(o.updateSelectedFilter("health",{value:void 0}),o.updateSelectedFilter("power",{value:void 0})),e.some((e=>"spell"===e.toLowerCase()))||o.updateSelectedFilter("speed",{value:void 0})},options:o.filterOptions.type,renderOption:(e,t)=>r({className:"icon-checkbox flex vhcenter clickable gutter-trbl-.5 capitalize"},f({isChecked:t,keywordName:e.toLowerCase()}))}):void 0,o.filterOptions.speed&&o.filterOptions.speed.length&&Array.prototype.some.call((o.selectedFilters.type||{}).value||[],(e=>"spell"===e.toLowerCase()))?u({label:m("speed"),value:o.selectedFilters.speed&&o.selectedFilters.speed.value||[],onChange:e=>{o.updateSelectedFilter("speed",{value:e})},options:o.filterOptions.speed,renderOption:(e,t)=>e?r({className:"icon-checkbox flex vhcenter clickable gutter-trbl-.5"},f({isChecked:t,keywordName:e.toLowerCase()})):void 0}):void 0,o.filterOptions.power&&o.filterOptions.power.length&&Array.prototype.some.call((o.selectedFilters.type||{}).value||[],(e=>"champion"===e.toLowerCase()||"follower"===e.toLowerCase()||"spell"===e.toLowerCase()))?v({label:m("power"),range:o.filterOptions.power,value:o.selectedFilters.power&&o.selectedFilters.power.value,onChange:e=>o.updateSelectedFilter("power",{value:e})}):void 0,o.filterOptions.health&&o.filterOptions.health.length&&Array.prototype.some.call((o.selectedFilters.type||{}).value||[],(e=>"champion"===e.toLowerCase()||"follower"===e.toLowerCase()||"spell"===e.toLowerCase()))?v({label:m("health"),range:o.filterOptions.health,value:o.selectedFilters.health&&o.selectedFilters.health.value,onChange:e=>o.updateSelectedFilter("health",{value:e})}):void 0,o.filterOptions.keywords&&o.filterOptions.keywords.length?u({label:m("keyword"),value:o.selectedFilters.keywords&&o.selectedFilters.keywords.value||[],onChange:e=>{o.updateSelectedFilter("keywords",{value:e})},options:o.filterOptions.keywords,optionKey:e=>e.id||e,renderOption:(e,t)=>r({className:"icon-checkbox flex vhcenter clickable gutter-trbl-.5"},e.toLowerCase?f({isChecked:t,keywordName:e.toLowerCase()}):f({isChecked:t,keywordName:e.name,icons:e.icons}))}):void 0)))}));