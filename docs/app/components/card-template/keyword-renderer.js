import e,{div as n}from"/Utils/elements.js";import t from"/Utils/load-css.js";import a from"/Utils/use-lang.js";import{useRef as r,useLayoutEffect as l,useState as s,useEffect as o}from"/cdn/react";import g from"/Utils/datauri.js";import p from"/Utils/use-asset-cache.js";import i from"/Utils/trim-transparent.js";const c=t("/Components/card-template/keyword-renderer.css");export const keywords={attune:["attune.png"],attach:["attach.png"],aura:["aura.png"],augment:["augment.png"],fleeting:["fleeting.png"],scout:["scout.png"],barrier:["barrier.png"],deep:["deep.png"],frostbite:["frostbite.png"],skill:["skill.png"],burst:["burst.png"],"double attack":["doubleattack.png"],"last breath":["lastbreath.png"],slow:["slow.png"],"can't attack":["cantattack.png"],elusive:["elusive.png"],lifesteal:["lifesteal.png"],landmark:["landmark.png"],stun:["stun.png"],"can't block":["cantblock.png"],ephemeral:["ephemeral.png"],overwhelm:["overwhelm.png"],tough:["tough.png"],capture:["capture.png"],fast:["fast.png"],"quick attack":["quickattack.png"],vulnerable:["vulnerable.png"],challenger:["challenger.png"],fearsome:["fearsome.png"],regeneration:["regeneration.png"],spellshield:["spellshield.png"],fury:["fury.png"],focus:["focus.png"],formidable:["formidable.png"],lurk:["lurk.png"],impact:["impact.png"],fated:["fated.png"],evolve:["evolve.png"],hallowed:["hallowed.png"],equipment:["equipment.png"],immobile:["cantattack.png","cantblock.png"],trap:[],boon:[],silence:["silence.png"],trigger:["trigger.png"],imbue:["imbue.png"],brash:["brash.png"],elementalskill:["elementalskill.png"]};const m={};function u(e){const n=e.map((e=>m[e]?m[e]:m[e]=fetch(e).then((e=>e.blob())).then(createImageBitmap).then((e=>i(e).convertToBlob())).then((e=>new Promise((n=>{const t=new FileReader;t.onloadend=()=>n(t.result),t.readAsDataURL(e)}))))));return Promise.all(n)}export default e((function(e){const{name:t,size:s}=e,o=keywords[t]||[],i=a(),c=r(),m=p((e=>{g("/Assets/keyword/keywordleft.png").then(e)}),[]),d=p((e=>{g("/Assets/keyword/keywordright.png").then(e)}),[]),h=p((e=>{g("/Assets/keyword/keywordmiddle.png").then(e)}),[]),k=p((n=>{if(e.icons)u(e.icons).then(n);else if(o&&o.length){const e=o.map((e=>g(`/Assets/keyword/${e}`)));Promise.all(e).then(u).then(n)}}),[e.icons],[]);return l((()=>{e.onDimension&&e.onDimension({width:c.current.clientWidth,height:c.current.clientHeight})}),[e.onDimension,k.length]),n({className:"keyword-wrapper",ref:c},n({className:"left-bumper",style:{backgroundImage:m?`url(${m})`:"none"}}),n({className:`contents ${o.length?s:"small"}`,style:{backgroundImage:h?`url(${h})`:"none"}},k.map((t=>n({key:t,className:"keyword-icon "+(e.icons&&e.icons.length?"custom":""),style:{backgroundImage:`url(${t})`}}))),"small"!==s||!k.length&&!o.length?n({className:"keyword-text card-text-bold card-text-outline"},i(t)):void 0),n({className:"right-bumper",style:{backgroundImage:d?`url(${d})`:"none"}}))}),c);