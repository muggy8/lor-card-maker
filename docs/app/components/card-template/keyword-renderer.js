import e,{div as t}from"/Utils/elements.js";import n from"/Utils/load-css.js";import a from"/Utils/use-lang.js";import{useRef as r,useLayoutEffect as s,useState as l,useEffect as o}from"/cdn/react";import i from"/Utils/datauri.js";import g from"/Utils/use-asset-cache.js";import p from"/Utils/trim-transparent.js";const c=n("/Components/card-template/keyword-renderer.css");export const keywords={attune:["attune.png"],attach:["attach.png"],aura:["aura.png"],augment:["augment.png"],fleeting:["fleeting.png"],scout:["scout.png"],barrier:["barrier.png"],deep:["deep.png"],frostbite:["frostbite.png"],skill:["skill.png"],burst:["burst.png"],"double attack":["doubleattack.png"],"last breath":["lastbreath.png"],slow:["slow.png"],"can't attack":["cantattack.png"],elusive:["elusive.png"],lifesteal:["lifesteal.png"],landmark:["landmark.png"],stun:["stun.png"],"can't block":["cantblock.png"],ephemeral:["ephemeral.png"],overwhelm:["overwhelm.png"],tough:["tough.png"],capture:["capture.png"],fast:["fast.png"],"quick attack":["quickattack.png"],vulnerable:["vulnerable.png"],challenger:["challenger.png"],fearsome:["fearsome.png"],regeneration:["regeneration.png"],spellshield:["spellshield.png"],fury:["fury.png"],focus:["focus.png"],formidable:["formidable.png"],lurk:["lurk.png"],impact:["impact.png"],fated:["fated.png"],evolve:["evolve.png"],hallowed:["hallowed.png"],equipment:["equipment.png"],immobile:["cantattack.png","cantblock.png"],trap:[],boon:[],silence:["silence.png"],trigger:["trigger.png"],imbue:["imbue.png"],brash:["brash.png"],elementalskill:["elementalskill.png"],curse:["curse.png"],deathless:["deathless.png"]};const m={};export function trimBase64StingIcon(e){return m[e]?m[e]:m[e]=fetch(e).then((e=>e.blob())).then(createImageBitmap).then((e=>p(e).convertToBlob())).then((e=>new Promise((t=>{const n=new FileReader;n.onloadend=()=>t(n.result),n.readAsDataURL(e)}))))}export function trimBase64StingIcons(e){const t=e.map((e=>trimBase64StingIcon(e)));return Promise.all(t)}export default e((function(e){const{name:n,size:l}=e,o=keywords[n]||[],p=a(),c=r(),m=g((e=>{i("/Assets/keyword/keywordleft.png").then(e)}),[]),u=g((e=>{i("/Assets/keyword/keywordright.png").then(e)}),[]),d=g((e=>{i("/Assets/keyword/keywordmiddle.png").then(e)}),[]),h=g((t=>{if(e.icons)trimBase64StingIcons(e.icons).then(t);else if(o&&o.length){const e=o.map((e=>i(`/Assets/keyword/${e}`)));Promise.all(e).then(trimBase64StingIcons).then(t)}}),[e.icons],[]);return s((()=>{e.onDimension&&e.onDimension({width:c.current.clientWidth,height:c.current.clientHeight})}),[e.onDimension,h.length]),t({className:"keyword-wrapper",ref:c},t({className:"left-bumper",style:{backgroundImage:m?`url(${m})`:"none"}}),t({className:`contents ${o.length?l:"small"}`,style:{backgroundImage:d?`url(${d})`:"none"}},h.map((n=>t({key:n,className:"keyword-icon "+(e.icons&&e.icons.length?"custom":""),style:{backgroundImage:`url(${n})`}}))),"small"!==l||!h.length&&!o.length?t({className:"keyword-text card-text-bold card-text-outline"},p(n)):void 0),t({className:"right-bumper",style:{backgroundImage:u?`url(${u})`:"none"}}))}),c);