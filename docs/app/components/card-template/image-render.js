import e,{div as t}from"/Utils/elements.js";import{useEffect as a,useState as n}from"/cdn/react";import i from"/Utils/load-css.js";const o=i("/Components/card-template/image-render.css");let m={};async function h(e){if(m[e])return m[e];const{width:t,height:a,image:n}=await function(e){return new Promise((t=>{const a=new Image;a.addEventListener("load",(()=>{t({width:a.width,height:a.height,image:a})})),a.src=e}))}(e),i=document.createElement("canvas");i.width=2*t,i.height=2*a;const o=i.getContext("2d");return void 0!==o.mozImageSmoothingEnabled&&(o.mozImageSmoothingEnabled=!1),void 0!==o.oImageSmoothingEnabled&&(o.oImageSmoothingEnabled=!1),void 0!==CanvasRenderingContext2D.webkitImageSmoothingEnabled&&(CanvasRenderingContext2D.webkitImageSmoothingEnabled=!1),void 0!==o.imageSmoothingEnabled&&(o.imageSmoothingEnabled=!1),o.clearRect(0,0,i.width,i.height),o.drawImage(n,0,0,t,a,0,0,t,a),o.scale(-1,1),o.drawImage(n,0,0,t,a,-i.width,0,t,a),o.setTransform(1,0,0,1,0,0),o.scale(1,-1),o.drawImage(n,0,0,t,a,0,-i.height,t,a),o.setTransform(1,0,0,1,0,0),o.scale(-1,-1),o.drawImage(n,0,0,t,a,-i.width,-i.height,t,a),o.setTransform(1,0,0,1,0,0),m[e]={width:i.width,height:i.height,b64:i.toDataURL()}}export default e((function(e){const{url:i}=e,[o,m]=n({});return a((()=>{i&&h(i).then(m)}),[i]),t({className:"processed-art",style:{"--width":o.width||0,"--height":o.height||0,backgroundImage:o.b64?`url(${o.b64})`:""}})}),o);