import e,{div as t,label as l,strong as s,button as o}from"/Utils/elements.js";import a from"/Utils/use-lang.js";import{useCallback as r,useRef as c}from"/cdn/react";import i from"/Components/deck/hooks/use-filterable-custom-card-list.js";import n from"/cdn/react-modal";import d from"/Components/deck/custom-cards-filters-ui.js";import m from"/Components/deck/card-name.js";import p from"/Utils/use-toggle.js";import u from"/Utils/load-css.js";const f=e(n),C=u("/Components/card-config/edit-clone-existing.css");export default e((function(e){const n=a(),u=c({}),C=i(u,{exclude:e.exclude,include:e.include,only:e.only}),[g,b,x]=p(!1),N=r((t=>{e.updateAll?e.updateAll({...t}):e.cardDataUpdaters&&Object.keys(t).forEach((l=>{if("id"===l||"type"===l||"dataVersion"===l)return;const s=e.cardDataUpdaters[l];void 0!==s&&s(t[l])})),x(!1)}),[e.cardDataUpdaters,e.updateAll,x]);return l({className:"box"},t({className:"flex gutter-b-.5"},t({className:"grow flex vcenter"},s(n("clone"))),o({className:"gutter-trbl-.5",onClick:b},t({className:"icon "+(g?"no-eye":"eye")}))),f({isOpen:g,contentLabel:"Select Card to Clone",shouldCloseOnOverlayClick:!0,onRequestClose:()=>x(!1),ariaHideApp:!1,className:"clone-selection-modal gutter-trbl",overlayClassName:"clone-selection-overlay"},d({filterOptions:C.filterOptions,updateSelectedFilters:C.patchFilters,updateSelectedFilter:C.patchFilter,selectedFilters:C.currentFilters}),t((C.filteredCardList||[]).map((e=>e?t({className:"flex gutter-b",key:e.id},m({card:e,className:"box-9"},e.name),t({className:"box-3 flex no-wrap"},o({className:"grow gutter-trbl-.5",onClick:()=>N(e)},t(n("clone"))))):void 0)))))}),C);