import e,{label as t,div as o,strong as a,button as s}from"/Utils/elements.js";import l from"/Utils/use-lang.js";import{useCallback as r,useState as c,useContext as i,useEffect as n}from"/cdn/react";import m from"/Components/card-template/svg-wrap.js";import d,{keywords as u}from"/Components/card-template/keyword-renderer.js";import{Globals as k}from"/Views/index.js";import f from"/Utils/use-toggle.js";export const KeywordImageCheck=e((function(e){const t=e.isChecked,[a,s]=c({width:120,height:104});return o({className:"gutter-trbl-.25 clickable flex column vhcenter "+(t?"":"ghost"),onClick:e.onClick},m(a,d({name:e.keywordName,size:e.size||"small",icons:e.icons,onDimension:s})))}));export default e((function(e){const m=l(),{customKeywords:d}=i(k),p=r((t=>{if(e.value.indexOf(t)>-1){const o=e.value.filter((e=>e!==t));return e.updateValue(o)}const o=[...e.value,t];e.updateValue(o)}),[e.value,e.updateValue]),g=r((t=>{if(e.value.findIndex((e=>e.id===t.id))>-1){const o=e.value.filter((e=>e.id!==t.id));return e.updateValue(o)}const o=[...e.value,t];e.updateValue(o)}),[e.value,e.updateValue]),[w,y,x]=f(!1),[N,h]=c(0);return n((()=>{w?h(document.documentElement.scrollTop):window.scrollTo({top:N,left:0,behavior:"smooth"})}),[w,N,h]),o(o({onClick:y,className:"flex clickable"},o({className:"grow"},t(a(m("keyword"))))),o({className:"gutter-b-2"},(e.value||[]).map((e=>{if("string"==typeof e){const t=e;return o({className:"flex no-wrap gutter-t-.5",key:t},o({className:"grow flex start"},KeywordImageCheck({keywordName:t,isChecked:!0,size:"large"})),s({className:"gutter-trbl-.5",onClick:()=>p(t)},o({className:"icon multiply"})))}if("object"==typeof e){const t=e;return o({className:"flex no-wrap gutter-t-.5",key:t.id},o({className:"grow flex start"},KeywordImageCheck({keywordName:t.name,icons:t.icons,isChecked:!0,size:"large"})),s({className:"gutter-trbl-.5",onClick:()=>g(t)},o({className:"icon multiply"})))}}))),o({className:"flex"},s({className:"grow gutter-trbl-.5",onClick:y},m(w?"hide_keyword_list":"add_keyword"))),o({className:"flex gutter-b-2 accordian "+(w?"expanded":"")},Object.keys(u).map((t=>{const a=e.value.some((e=>e===t));return o({className:"box-xs-3 box-l-2 flex vhcenter",key:t},KeywordImageCheck({isChecked:a,onClick:()=>{p(t)},keywordName:t}))})),d.map((t=>{const a=e.value.some((e=>e.id===t.id));return o({className:"box-xs-3 box-l-2 flex vhcenter",key:t.id},KeywordImageCheck({keywordName:t.name,icons:t.icons,isChecked:a,onClick:()=>g(t)}))})),o({className:"flex box-12"},s({className:"grow gutter-trbl-.5",onClick:()=>x(!1)},m("hide_keyword_list")))))}));