import e,{label as t,div as a,strong as l,button as o,input as r}from"/Utils/elements.js";import s from"/Utils/use-lang.js";import{useCallback as c,useState as n,useContext as i,useEffect as m}from"/cdn/react";import u from"/Components/card-template/svg-wrap.js";import d,{keywords as f}from"/Components/card-template/keyword-renderer.js";import{Globals as g}from"/Views/index.js";import k from"/Utils/use-toggle.js";export const KeywordImageCheck=e((function(e){const t=e.isChecked,[l,o]=n({width:120,height:104});return a({className:"gutter-trbl-.25 clickable flex column vhcenter "+(t?"":"ghost"),onClick:e.onClick},u(l,d({name:e.keywordName,size:e.size||"small",icons:e.icons,onDimension:o})))}));export default e((function(e){const u=s(),{customKeywords:d}=i(g),p=c((t=>{if(e.value.indexOf(t)>-1){const a=e.value.filter((e=>e!==t));return e.updateValue(a)}const a=[...e.value,t];e.updateValue(a)}),[e.value,e.updateValue]),w=c((t=>{if(e.value.findIndex((e=>e.id===t.id))>-1){const a=e.value.filter((e=>e.id!==t.id));return e.updateValue(a)}const a=[...e.value,t];e.updateValue(a)}),[e.value,e.updateValue]),[x,N]=n(""),h=c((e=>{N((e.target.value||"").toLowerCase())}),[N]),[y,C,b]=k(!1),[v,j]=n(0);return m((()=>{y?j(document.documentElement.scrollTop):(window.scrollTo({top:v,left:0,behavior:"smooth"}),N(""))}),[y,v,j,N]),a(a({onClick:C,className:"flex clickable"},a({className:"grow"},t(l(u("keyword"))))),a({className:"gutter-b-2"},(e.value||[]).map((e=>{if("string"==typeof e){const t=e;return a({className:"flex no-wrap gutter-t-.5",key:t},a({className:"grow flex start"},KeywordImageCheck({keywordName:t,isChecked:!0,size:"large"})),o({className:"gutter-trbl-.5",onClick:()=>p(t)},a({className:"icon multiply"})))}if("object"==typeof e){const t=e;return a({className:"flex no-wrap gutter-t-.5",key:t.id},a({className:"grow flex start"},KeywordImageCheck({keywordName:t.name,icons:t.icons,isChecked:!0,size:"large"})),o({className:"gutter-trbl-.5",onClick:()=>w(t)},a({className:"icon multiply"})))}}))),a({className:"flex"},o({className:"grow gutter-trbl-.5",onClick:C},u(y?"hide_keyword_list":"add_keyword"))),a({className:"flex hcenter gutter-b-2 accordian "+(y?"expanded":"")},a({className:"flex box-12 gutter-tb-.5"},r({value:x,onChange:h,type:"search",placeholder:u("search"),className:"grow gutter-trbl-.5"}),a({className:"gutter-r-.5"}),o({className:"gutter-tb-0.5 gutter-rl flex vhcenter",onClick:()=>N("")},a({className:"icon multiply"}))),Object.keys(f).map((t=>{if(x&&!t.toLowerCase().includes(x))return;const l=e.value.some((e=>e===t));return a({className:"box-xs-4 box-m-3 box-l-2 flex vhcenter",key:t},KeywordImageCheck({isChecked:l,onClick:()=>{p(t)},keywordName:t}))})).filter((e=>!!e)),d.map((t=>{if(x&&!t.name.toLowerCase().includes(x))return;const l=e.value.some((e=>e.id===t.id));return a({className:"box-xs-4 box-m-3 box-l-2 flex vhcenter",key:t.id},KeywordImageCheck({keywordName:t.name,icons:t.icons,isChecked:l,onClick:()=>w(t)}))})).filter((e=>!!e)),a({className:"flex box-12 gutter-t-.5"},o({className:"grow gutter-trbl-.5",onClick:()=>b(!1)},u("hide_keyword_list")))))}));