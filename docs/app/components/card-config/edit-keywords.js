import e,{label as o,div as t,strong as a}from"/Utils/elements.js";import s from"/Utils/use-lang.js";import{useCallback as r,useState as l,useRef as n,useContext as c}from"/cdn/react";import i from"/Components/card-template/svg-wrap.js";import m,{keywords as d}from"/Components/card-template/keyword-renderer.js";import{Globals as u}from"/Views/index.js";import p from"/Utils/use-toggle.js";import f,{useAssetCacheDebounced as k}from"/Utils/use-asset-cache.js";export const KeywordImageCheck=e((function(e){const o=e.isChecked,[a,s]=l({width:120,height:104});return t({className:"gutter-trbl-.25 clickable flex column vhcenter "+(o?"":"ghost"),onClick:e.onClick},i(a,m({name:e.keywordName,size:"small",icons:e.icons,onDimension:s})))}));export default e((function(e){const l=s(),{customKeywords:n}=c(u),i=r((o=>{if(e.value.indexOf(o)>-1){const t=e.value.filter((e=>e!==o));return e.updateValue(t)}const t=[...e.value,o];e.updateValue(t)}),[e.value,e.updateValue]),m=r((o=>{if(e.value.findIndex((e=>e.id===o.id))>-1){const t=e.value.filter((e=>e.id!==o.id));return e.updateValue(t)}const t=[...e.value,o];e.updateValue(t)}),[e.value,e.updateValue]),[f,k]=p(!0);return o(t({onClick:k,className:"flex clickable"},t({className:"grow"},a(l("keyword"))),t({className:"icon animated "+(f?"multiply":"chevron-down")})),t({className:"flex gutter-b-2 accordian "+(f?"expanded":"")},Object.keys(d).map((o=>{const a=e.value.some((e=>e===o));return t({className:"box-3 flex vhcenter",key:o},KeywordImageCheck({isChecked:a,onClick:()=>{i(o)},keywordName:o}))})),n.map((o=>{const a=e.value.some((e=>e.id===o.id));return t({className:"box-3 flex vhcenter",key:o.id},KeywordImageCheck({keywordName:o.name,icons:o.icons,isChecked:a,onClick:()=>{m(o)}}))}))))}));