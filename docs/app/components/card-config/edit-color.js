import e,{div as t,strong as a,label as l,button as o}from"/Utils/elements.js";import r from"/Utils/load-css.js";import{ChromePicker as c}from"/cdn/react-color";import{useState as s,useContext as n,useEffect as d,useCallback as i}from"/cdn/react";import u from"/Utils/use-lang.js";import{Globals as m}from"/Views/index.js";import p from"/Utils/use-toggle.js";import{FastAverageColor as g}from"/cdn/fast-average-color";const f=e(c),v=r("/Components/card-config/edit-color.css"),x=new g;export default e((function(e){const r=u(),c=!0===n(m).state.settings.lowSpecsMode,[g,v]=s("#FFF");d((()=>{e.value?v(e.value):v("#FFF")}),[e.value]);const[h,N]=p(!1),b=i((()=>{const t=e.cardArt;t&&x.getColorAsync(t).then((t=>{v(t.hex),e.updateValue(t.hex)})).catch(console.warn)}),[e.cardArt,e.updateValue]);return t({className:"box",id:"color-edit",style:{"--selected-color":g}},l({className:"gutter-b flex clickable",onClick:N},t({className:"grow flex vcenter"},e.label?a(e.label):a(r("color"))),o({className:"gutter-trbl-.5 flex vcenter"},t({className:`icon ${c?"":"animated"} ${h?"multiply":"chevron-down"}`}))),t({className:"gutter-rl-.5 accordian "+(h?"expanded":"")},f({width:"100%",color:g,disableAlpha:!0,onChange:e=>v(e.hex),onChangeComplete:t=>e.updateValue&&e.updateValue(t.hex),className:"color-select-input"}),t({className:"flex no-wrap gutter-t"},e.value?o({className:"grow gutter-trbl-.5",onClick:()=>e.updateValue&&e.updateValue(null)},r("reset_default")):void 0,e.value&&e.cardArt?t({className:"gutter-rl-.5"}):void 0,e.cardArt?o({className:"grow gutter-trbl-.5",onClick:b},r("calculate_based_on_art")):void 0)))}),v);