import t,{fragment as e}from"/Utils/elements.js";import{useState as n,useEffect as r,useRef as i}from"/cdn/react";import o from"/Utils/debounce-function.js";import c from"/Utils/use-asset-cache.js";export default t((function(t){const[s,l]=n(t.defaultSize||12);r((()=>{t.defaultSize&&t.defaultSize>s&&l(t.defaultSize)}),[t.defaultSize,s]);const u=c((e=>{e(t.children.flat()),t.autoResetLimit&&l(t.defaultSize||12)}),[t.children,t.autoResetLimit],[]),d=i();d.current=t.bottomOffset||200;const f=i();f.current=s;const m=i();return m.current=u.length,r((()=>{const e=o((()=>{const n=document.body,r=document.documentElement,i=Math.max(n.scrollHeight,n.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight),o=window.innerHeight+window.scrollY;if(d.current+o>=i&&(console.log({currentLimit:f,currentListLength:m}),f.current<m.current)){const n=Math.min(f.current+(t.defaultSize||8),m.current);l(n),setTimeout(e,200)}}),100);return e(),window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]),e(u.slice(0,s))}));