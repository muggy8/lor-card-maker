import e,{fragment as t}from"/Utils/elements.js";import{useState as n,useEffect as r,useRef as i}from"/cdn/react";import o from"/Utils/debounce-function.js";import c from"/Utils/use-asset-cache.js";export default e((function(e){const[s,l]=n(e.defaultSize||12);r((()=>{e.defaultSize&&e.defaultSize>s&&l(e.defaultSize)}),[e.defaultSize,s]);const u=c((t=>{t(e.children.flat()),e.autoResetLimit&&l(e.defaultSize||12)}),[e.children,e.autoResetLimit],[]),f=i();f.current=e.bottomOffset||200;const d=i();d.current=s;const m=i();return m.current=u.length,r((()=>{const t=o((n=>{if("number"==typeof n){if(n>10)return}else n=0;const r=document.body,i=document.documentElement,o=Math.max(r.scrollHeight,r.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight),c=window.innerHeight+window.scrollY;if(f.current+c>=o&&d.current<m.current){const r=Math.min(d.current+(e.defaultSize||8),m.current);l(r),setTimeout((()=>t(n+1)),200)}}),100);return t(),window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)}),[]),t(u.slice(0,s))}));