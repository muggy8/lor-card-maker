import e,{fragment as t}from"/Utils/elements.js";import{useState as n,useEffect as r,useRef as o}from"/cdn/react";import i from"/Utils/debounce-function.js";import c from"/Utils/use-asset-cache.js";export default e((function(e){const[l,s]=n(e.defaultSize||12);r((()=>{e.defaultSize&&e.defaultSize>l&&s(e.defaultSize)}),[e.defaultSize,l]);const u=c((t=>{t(e.children.flat()),s(e.defaultSize||12)}),[e.children],[]),d=o();d.current=e.bottomOffset||200;const f=o();f.current=l;const m=o();return m.current=u.length,r((()=>{const t=i((()=>{const t=document.body,n=document.documentElement,r=Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight),o=window.innerHeight+window.scrollY;if(d.current+o>=r&&f.current<m.current){const t=Math.min(f.current+(e.defaultSize||8),m.current);s(t)}}),100);return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)}),[]),t(u.slice(0,l))}));