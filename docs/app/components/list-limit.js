import t,{fragment as e}from"/Utils/elements.js";import{useState as n,useEffect as r,useRef as i}from"/cdn/react";import o from"/Utils/debounce-function.js";import c from"/Utils/use-asset-cache.js";export default t((function(t){const[s,l]=n(t.defaultSize||12);r((()=>{t.defaultSize&&t.defaultSize>s&&l(t.defaultSize)}),[t.defaultSize,s]);const u=c((e=>{e(t.children.flat()),t.autoResetLimit&&l(t.defaultSize||12)}),[t.children,t.autoResetLimit],[]),d=i();d.current=t.bottomOffset||200;const f=i();f.current=s;const m=i();return m.current=u.length,r((()=>{const e=o((()=>{const e=document.body,n=document.documentElement,r=Math.max(e.scrollHeight,e.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight),i=window.innerHeight+window.scrollY;if(d.current+i>=r&&f.current<m.current){const e=Math.min(f.current+(t.defaultSize||8),m.current);l(e)}}),100);return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]),e(u.slice(0,s))}));