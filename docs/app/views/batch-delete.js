import e,{div as t,button as r,strong as l,input as o,section as s}from"/Utils/elements.js";import{useContext as n,useState as i,useCallback as a,useMemo as c}from"/cdn/react";import{Globals as m}from"/Views/index.js";import f from"/Utils/load-css.js";import u from"/Utils/use-lang.js";import p from"/Utils/use-asset-cache.js";import{deleteCard as g,getCardList as d}from"/Utils/service.js";import C from"/Components/list-limit.js";import{typeToComponent as h}from"/Views/list.js";import x from"/Utils/use-toggle.js";const b=f("/Views/batch-delete.css");export function ConfirmDeleteWrapperComponent(e){const[o,s]=i(!1),n=u(),[c,m]=i(!1),f=a((()=>{s(!1),e.onConfirm&&(m(!0),e.onConfirm())}),[e.onConfirm,m,s]);return t({className:"clickable gutter-trbl-.5 box-xs-6 box-m-3 flex column vhcenter relative"},...Array.isArray(e.children)?e.children:[e.children],o?t({className:"confirm-overlay active gutter-trbl-2 flex vhcenter"},t(l(n("confirm_delete")),t({className:"flex gutter-t-1"},r({className:"grow gutter-trbl-0.5 flex vhcenter",onClick:f},l(n("yes"))),t({className:"gutter-rl-.5 gutter-tb-1.5"}),r({className:"grow gutter-trbl-0.5 flex vhcenter",onClick:()=>s(!1)},l(n("no")))))):t({className:"confirm-overlay delete-icon gutter-trbl-1 flex vhcenter",onClick:c?void 0:()=>s(!0)},t({className:"icon "+(c?"loading":"multiply")})))}export const ConfirmDeleteWrapper=e(ConfirmDeleteWrapperComponent);export default e((function(e){const l=u(),[a,f]=x(!1),b=!0===n(m).state.settings.lowSpecsMode,v=p((e=>{d({include:"deck"}).then(e)}),[a],[]),[N,w]=i(""),y=c((()=>v.map((e=>{const t=h(e.type);return t?N&&e.name&&!e.name.toLowerCase().includes(N)?null:ConfirmDeleteWrapper({key:e.id,onConfirm:()=>{g(e.id).then(f)}},t(e)):null})).filter((e=>!!e))),[v,N,f]);return s({id:"bulk-delete"},t({className:"flex gutter-trbl"},t({className:"flex grow gutter-r"},o({className:"grow gutter-trbl-.5",value:N,placeholder:l("search"),type:"search",onChange:e=>{w((e.target.value||"").toLowerCase())}})),r({className:"gutter-trbl-0.5 flex vhcenter",onClick:()=>w("")},t({className:"icon multiply"}))),t({className:"gutter-trbl-.5 flex"},C({defaultSize:b?6:void 0},y)))}),b);